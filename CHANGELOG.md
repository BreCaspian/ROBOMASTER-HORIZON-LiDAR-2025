## 部分开发日志

开发日志（2025.04.11 – 2025.05.04）

## 2025.04.11

- **21:43** 建立核心代码存储目录，用于保存比赛直接使用的最优代码。
- **22:54** 整合海康工业相机、迈德威视工业相机驱动与体素网格降采样，并加入 CH128X 激光雷达驱动。

------

## 2025.04.12

- **12:34**
  - 完成海康与迈德威视相机驱动及体素网格降采样的融合适配，效果良好。
  - **迈德威视相机 + 体素网格采样**组合效果最佳。
  - 海康相机存在：`Gain` 设置无响应、帧率不足、LOC 问题。
  - CH128X 激光雷达驱动无法与主程序共同编译（OOM），需探索点云分块并行计算方案。
  - 降采样需封装为可选模块。
- **16:09** 完全封装降采样方法。
- **16:25** 在 GUI 中添加 `GainAuto` 选项（Continuous 模式），但发现手动设置被自动覆盖。
- **16:55** 添加 `FrameRate` 控制选项，帧率优化，最高可达 19.2fps；解决海康相机长时间低帧率问题。
- **19:05** 实现点云可视化覆盖图像（测试功能）。
- **20:13**
  - 自动增益测试功能正常，但建议仅放在图像调整 GUI。
  - 海康相机帧率设置响应异常，固定在 ~10fps，需进一步研究。
  - voxel_size ≤ 0.01 会导致内存错误。
- **22:29** 将 `Gain` 调节移入 `t` 键触发的预览 GUI。
- **22:49** 初步实现高帧率模式。
- **23:43** `Gain` 功能正常，帧率问题仍未解决，怀疑与曝光时间相关。

------

## 2025.04.13

- **00:51**
  - 废弃超帧率方案。
  - 通过降低分辨率提升帧率：5472×3648 → 6fps；4K → 10–11fps；1080p → 12fps。
  - 准备修改日志输出与核心点云运算。
- **11:30** 添加雷达点云检查 Logger 输出。
- **12:20** 开始实现点云分块处理。
- **16:31**
  - Logger 输出过多；FrameRate 滑条实用性低；LOC 与 Depth 无响应；CoverDepth 无效。
  - 考虑软切换相机。
- **17:00** 移除 FrameRate 滑条，固定 19fps。
- **17:19** Logger 调整为每三秒输出一次点云检查。
- **17:37** 完成体素网格降采样自适应切换，功能正常。

------

## 2025.04.15

- **00:17**
  - 降采样手动/自适应模式均正常。
  - 空点云 Logger 无意义，更重要的是点数过多情况。
  - 缺少“标定完成后点云消息未接入检查”。

------

## 2025.04.17

- **16:38** 完成点云分块处理。
- **17:48** 优化点云分块处理，提升稳健性。
- **19:28** 分块处理测试正常，但缺少 LOC / Depth 日志。

------

## 2025.04.20

- **01:39** 待实现六点标定，提升 PnP 精度。
- **18:49** 修复 GUI 标定窗口失效问题。

------

## 2025.04.21

- **17:12** 完成双相机驱动可切换（Hikvision/Mindvision）。
- **18:00** 修复海康相机预览界面 Gain 无响应。
- **21:00** 添加点云可视化（深度映射）。
- **21:40** GUI 全面重构：现代化布局、功能分区、状态栏/FPS/地图比例尺，提升交互体验。

------

## 2025.04.23

- **01:21** 测试发现：
  1. 点云可视化无效（可能是标定问题）。
  2. 海康相机增益滑条范围过大（实际仅 0–23 有效）。
  3. 四点标定精度不足。
  4. 新 GUI 高像素相机下内容缩小。
  5. 集成迈德威视 SDK。

------

## 2025.04.29

- **20:30** 修复海康增益范围（最大 23，超出无效）。
- **20:55** 修复 GUI 内容缩小问题。
- **21:32** 增益测试通过。
- **22:08** 修复滑条虚值。
- **22:21** 移除 GUI 地图比例尺。

------

## 2025.04.30

- **11:21** GUI 初步美化：将滑条改为左右按钮。
- **12:10** 修复点云可视化信息过小与 TEAM 错位问题。

------

## 2025.05.02

- **17:26**
  - 控制按钮间距过近。
  - 相机分辨率设为 5472×3648。
  - TEAM 显示反了。
  - 点云可视化文字过小。
  - FPS 显示不准确。
- **22:57** 曝光时间修改导致标定窗口闪烁无法关闭。
- **05.03 00:21** 替换 PnP 方法。
- **05.03 00:55** 发现相机参数未重置，导致重复运行异常。

------

## 2025.05.04

- **01:17**
  - 检测结果缺少装甲板与车辆框。
  - 删除自动增益，限制曝光范围，实时显示帧率。
  - 地图显示被压缩。
  - 建议移动点云可视化文字到画面右侧。
  - 需优化输出日志频率，专注于坐标与深度。

---

## 后续所有问题都已解决优化
