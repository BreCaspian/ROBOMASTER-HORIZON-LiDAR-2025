# PointCloudVisualizer 点云可视化模块

## 模块概述

PointCloudVisualizer是ROBOMASTER2025-HORIZON战队雷达站系统的点云可视化组件，负责将3D激光雷达点云数据投影到2D相机图像上进行可视化显示。该模块提供深度颜色编码、自适应深度范围调整和实时统计信息显示功能。

## 文件结构

```
PointCloudVisualizer/
├── include/
│   └── PointCloudVisualizer.h    # 点云可视化器接口
└── src/
    └── PointCloudVisualizer.cpp  # 点云可视化器实现
```

---

## 核心功能

### 点云投影可视化
- 将3D点云投影到2D图像平面
- 基于深度的颜色编码显示
- 可配置的点大小和显示样式
- 实时性能统计信息

### 深度范围管理
- 自动深度范围检测
- 手动深度范围设置
- 动态深度范围调整
- 深度颜色映射

### 信息显示
- 点云统计信息（有效点数/总点数）
- 深度范围显示
- 颜色深度图例
- 实时性能指标



## 技术特点

### 坐标变换
- 世界坐标系到相机坐标系变换
- 3D点到2D像素坐标投影
- 齐次坐标系计算

### 颜色编码
- HSV色彩空间深度映射
- 近距离点显示为红色
- 远距离点显示为蓝色
- 平滑的颜色过渡

### 自适应功能
- 自动计算点云深度范围
- 动态调整颜色映射范围
- 异常值过滤和处理

### 性能优化
- 有效点过滤机制
- 边界检查优化
- 异常处理保护



## 使用方法

### 基本初始化
1. 创建PointCloudVisualizer对象
2. 设置相机内参和外参矩阵
3. 启用可视化功能
4. 配置显示参数

### 实时可视化
1. 获取点云数据
2. 准备目标图像
3. 调用visualizePointCloud方法
4. 显示结果图像



## 参数配置

### 显示参数
- **点大小**: 1-10像素（默认1）
- **信息显示**: 开启/关闭统计信息
- **可视化开关**: 启用/禁用整个模块

### 深度参数
- **最小深度**: 默认0.5米
- **最大深度**: 默认10.0米
- **自动范围**: 自动计算深度范围

### 颜色映射
- **色调范围**: 0-240度（红到蓝）
- **饱和度**: 固定255（最大饱和度）
- **亮度**: 固定255（最大亮度）



## 显示信息

### 统计信息
- 有效点数和总点数
- 投影成功率百分比
- 当前深度范围

### 可视化图例
- 深度颜色条
- 最小/最大深度标注
- 实时更新的范围信息

---

**注意**: 该模块主要用于调试和可视化，在比赛中可根据需要禁用以提高系统性能。
